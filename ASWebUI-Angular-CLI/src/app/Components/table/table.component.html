<ng-container>
  <div id="tabledataheight" class="tableContainer mt-5 mat-elevation-z3">
    <div class="componentTop">
      <div class="table-top">
        <h1>{{ componentName }}s</h1>
        
        <div class="action-buttons">
        <button mat-stroked-button color="warn" (click)="batchDelete()">
          <mat-icon>delete_forever</mat-icon>
        </button>
        <button mat-flat-button color="accent" (click)="AddRecord()">
          <mat-icon>add</mat-icon>
        </button>
        </div>
      </div>
      <div class="input-container" *ngIf="componentName === 'Invoice'">
                <!-- *ngIf="componentName === 'Invoice'" -->
          <form class="invoiceInfo">
            <mat-form-field appearance="outline">
              <mat-label>Client</mat-label>
              <input matInput placeholder="">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Invoice Number</mat-label>
              <input matInput placeholder="">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Invoice Date</mat-label>
              <input matInput placeholder="">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Payment Due</mat-label>
              <input matInput placeholder="">
            </mat-form-field>
            
          </form>

        
        <!-- <form>

          <mat-form-field appearance="outline">
            <mat-label>Invoice Number</mat-label>
            <input matInput placeholder="">
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Invoice Date</mat-label>
            <input matInput placeholder="">
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Payment Due</mat-label>
            <input matInput placeholder="">
          </mat-form-field>
        </form> -->
      </div>
    </div>
    <div class="tableScroll">
      <!-- Table -->
      <table mat-table matSort #table multiTemplateDataRows class="mt-0">

        <ng-container [matColumnDef]="CheckboxColumn" *ngIf="hasCheckboxColumn">
          <th mat-header-cell *matHeaderCellDef>
            <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()"
              [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
            </mat-checkbox>
          </th>
          <td mat-cell *matCellDef="let row">

            <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
              [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)" *ngIf="!objectIsEmpty(row)">
              <!-- *ngIf="(row | json) != '{}' && (row | json) != null && (row | json) != undefined" -->

            </mat-checkbox>
          </td>
        </ng-container>
        <!-- (matSortChange)="sortTable($event)" -->
        <ng-container *ngFor="let tableColumn of tableColumns; let i = index" [matColumnDef]="tableColumn.name">
          <!-- if sortable column header -->
          <ng-container *ngIf="tableColumn.isSortable; else notSortable">
            <th mat-header-cell *matHeaderCellDef [mat-sort-header]="tableColumn.dataKey">
              {{ tableColumn.name }}
            </th>
          </ng-container>

          <!-- else not sortable -->
          <ng-template #notSortable>
            <th mat-header-cell *matHeaderCellDef>
              {{ tableColumn.name }}
            </th>
          </ng-template>

          <!-- column data -->

          <!-- <ng-container *ngIf="!tableColumn.nestedProperty; else object"> -->
          <ng-container>

            <td mat-cell *matCellDef="let record" class="cursor-pointer" (click)="!hasCheckboxColumn ? $event.stopPropagation() : selection.toggle(record)">
              <!-- (click)="record.disable || !hasActionColumn ? $event.stopPropagation() : edit(record)" -->

              {{ record | dataPropertyGetter: tableColumn.dataKey : tableColumn.nestedProperty }}
            </td>
          </ng-container>

          <!-- <ng-template #object>
          <td mat-cell *matCellDef="let record" [class.text-right]="tableColumn.position == 'right'"
          (click)="record.disable ? $event.stopPropagation() : edit(record)" class="cursor-pointer">
          
          {{ record[tableColumn.dataKey][tableColumn.nestedProperty] }}
          </td>
        </ng-template> -->


        </ng-container>
        <!-- action column -->

        <ng-container [matColumnDef]="ActionColumn" *ngIf="hasActionColumn">
          <th mat-header-cell *matHeaderCellDef class="text-center">
            Actions
            <!-- <div class="action-buttons">

              <button mat-stroked-button color="warn" (click)="batchDelete()">
                <mat-icon>delete_forever</mat-icon>
              </button>
              <button mat-flat-button color="accent" (click)="AddRecord()">
                <mat-icon>add</mat-icon>
              </button>
            </div> -->
          </th>

          <td mat-cell *matCellDef="let element">
            <div *ngIf="!objectIsEmpty(element)" class="table-actions">
              <!-- *ngIf="(element | json) != '{}' && (element | json) != null && (element | json) != undefined" -->
              <button mat-stroked-button color="primary" (click)="edit(element)">
                Edit
              </button>
              <button mat-stroked-button color="warn" (click)="delete(element)">
                Delete
              </button>
            </div>
          </td>
        </ng-container>

        <!-- Filter -->
        <ng-container *ngIf="isFilterable">
          <ng-container *ngFor="let columnFilter of displayedColumnFilters; let i = index"
            [matColumnDef]="columnFilter">
            <th mat-header-cell *matHeaderCellDef class="filterInputs">
              <ng-container *ngIf="
                  !columnFilter.includes('notFiltered') &&
                  columnFilter != 'action' &&
                  columnFilter != 'check'
                ">

                <mat-form-field appearance="outline">
                  <mat-label> Filter </mat-label>
                  <input matInput (keyup)="applyFilter($event, columnFilter)" (focus)="setupFilter(columnFilter)"
                    placeholder="" [(ngModel)]="filterInputs[columnFilter]" [attr.name]="columnFilter">
                  <button *ngIf="filterInputs[columnFilter]" matSuffix mat-icon-button aria-label="Clear"
                    (click)="clearInput(columnFilter)">
                    <mat-icon>close</mat-icon>
                  </button>
                </mat-form-field>

              </ng-container>
              <!-- <ng-container
                *ngIf="columnFilter == 'check'"
                class=""
              >
               <div style="width: 100px;background-color: blue;">test</div>
              </ng-container>
            
<mat-form-field appearance="outline">
  <mat-label> Filter </mat-label>
  <input matInput (keyup)="applyFilter($event, columnFilter)" (focus)="setupFilter(columnFilter)" placeholder=""
    [(ngModel)]="filterInputs[columnFilter]" [attr.name]="columnFilter">
  <button *ngIf="filterInputs[columnFilter]" matSuffix mat-icon-button aria-label="Clear"
    (click)="clearInput(columnFilter)">
    <mat-icon>close</mat-icon>
  </button>
</mat-form-field>


<div class="input-group ">

  <input (keyup)="applyFilter($event, columnFilter)" (focus)="setupFilter(columnFilter)" placeholder="filter"
    class="form-control form-control-sm" [(ngModel)]="filterInputs[columnFilter]" [attr.name]="columnFilter" />
  <button matSuffix mat-icon-button aria-label="Clear" *ngIf="true" (click)="clearInput(columnFilter)"
    aria-label="Clear">
    <mat-icon>close</mat-icon>
  </button>



</div>


            -->

              <ng-container *ngIf="columnFilter.includes('notFiltered')">

                <mat-form-field appearance="outline">
                  <mat-label> Filter </mat-label>
                  <input matInput disabled>
                </mat-form-field>

              </ng-container>

              <ng-container *ngIf="columnFilter == 'action'" class="clearButtonTD">
                <button [disabled]="emptyFilters" mat-flat-button class="clearButton" color="primary" (click)="clearFilters()">
                  <mat-icon>filter_alt_off</mat-icon>
                </button>
              </ng-container>
            </th>
          </ng-container>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

        <ng-container *ngIf="isFilterable">
          <tr mat-header-row *matHeaderRowDef="displayedColumnFilters"></tr>
        </ng-container>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"
           class="bg-accent-light-hover"></tr>
      </table>
    </div>

    <!-- Pagination -->
    <mat-paginator *ngIf="isPageable" #matPaginator [length]="tableDataItems.data?.length"
      [pageSizeOptions]="paginationSizes" [pageSize]="defaultPageSize" showFirstLastButtons>
      <!-- (page)="pageEvent = handlePage($event)" -->
    </mat-paginator>

    <!-- <div class="componentbottom" *ngIf="componentName === 'Invoice'">
      <form>
        <mat-form-field appearance="outline">
          <mat-label>Client</mat-label>
          <input type="text" matInput [matAutocomplete]="auto">
          <mat-autocomplete #auto="matAutocomplete">
          </mat-autocomplete>
        </mat-form-field>
      </form>
    </div> -->
  </div>
</ng-container>